---
import { storyblokEditable } from '@storyblok/astro';
import { Image } from 'astro:assets';
import { cn } from '@/lib/utils';
import { DropdownNav } from '@/components/dropdown-nav';
import { DropdownNavMobile } from '@/components/dropdown-nav-mobile';

const currentPath = Astro.url.pathname;
const isHome = currentPath === '/';
const isInversion = currentPath.includes('inversion');
const hasHeroImage = isHome || isInversion;

const { blok } = Astro.props;
---

<section {...storyblokEditable(blok)}>
  <div class="container pt-10 sm:pt-16">
    <div>
      <h1
        class={cn(
          'font-heading tracking-tight  text-balance  ',
          isInversion ? 'text-3xl sm:text-6xl' : 'text-4xl sm:text-[80px] sm:leading-[1]',
          isHome ? 'max-w-[50rem]' : 'max-w-prose'
        )}>
        {blok.headline}
      </h1>
      <p class="mt-6 text-lg sm:text-xl text-neutral-700 max-w-[35em]">
        {blok.subheadline}
      </p>
      {
        hasHeroImage && (
          <div class="relative mt-4 sm:mt-12 rounded-[15px] sm:rounded-lg overflow-hidden shadow-sm sm:aspect-video">
            <Image
              src={blok.background_image.filename}
              alt={blok.background_image.alt}
              format="webp"
              width="1228"
              height="691"
              class="w-full h-full object-cover"
              loading="eager"
            />

            {isHome && (
              <div class="hidden sm:absolute sm:top-6 sm:right-6 sm:flex sm:items-center sm:justify-center">
              <DropdownNav client:load />
            </div>
            <div class="sm:hidden mt-8">
              <DropdownNavMobile client:load />
            </div>
            )}            
          </div>
        )
      }
    </div>
  </div>
</section>
