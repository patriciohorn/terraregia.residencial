---
import { storyblokEditable, renderRichText } from '@storyblok/astro';
import { Link } from '@/components/link';
import { PhoneCall, CalendarCheck2 } from 'lucide-react';
import { Icon } from 'astro-icon/components';

const { blok } = Astro.props;

const renderedRichText = renderRichText(blok.descripcion_cita);
const locationDescription = renderRichText(blok.descripcion_location);
---

<div
  {...storyblokEditable(blok)}
  class="grid sm:grid-cols-3 gap-y-4 gap-x-6">
  <div
    class="map | overflow-hidden rounded-md shadow-sm col-span-2"
    set:html={blok.mapa}>
    <!-- Render iframe with Project Google Map -->
  </div>
  <div class="flex flex-col gap-y-6">
    <div
      class="bg-white rounded-md p-6 flex flex-col shadow-sm flex-1">
      <!-- <div
        class="inline-flex
      justify-center items-center rounded-sm w-12 h-12 bg-neutral-100 mb-12">
        <CalendarCheck2 size={32} strokeWidth={1} />
      </div> -->
      <h3 class="mb-4 text-3xl font-heading font-bold">
        {blok.titulo_cita}
      </h3>
      <div class="prose leading-6 mb-6" set:html={renderedRichText} />
      <Link
        href={`tel:${blok.telefono}`}
        className=" justify-center inline-flex items-center">
        <PhoneCall className="w-4 h-4 mr-2.5" />
        <span>Agenda tu visita</span>
      </Link>
    </div>
    <div
      class="bg-[#e9f5f5] border border-[#b1ddde] rounded-md p-6 shadow-sm flex-1">
      <h3 class="text-3xl font-heading text-[#192a33]">
        {blok.titulo_location}
      </h3>
      <div
        class="prose leading-6 mt-4 text-[#29545c]"
        set:html={locationDescription}
      />
      <div
        class="flex flex-col sm:flex-row justify-between gap-2 mt-6">
        <Link
          href={blok.google_maps_link}
          className="w-full bg-white text-black hover:bg-black hover:text-white">
          <Icon name="googleMaps" class="w-5 h-5 mr-2.5" />
          <span>Google Maps</span>
        </Link>
        <Link
          href={blok.waze_link}
          className="bg-[#33ccff] text-black w-full inline-flex items-center hover:bg-[#0092ce]">
          <Icon name="waze" class="w-5 h-5 mr-2" />
          <span>waze</span>
        </Link>
      </div>
    </div>
  </div>
</div>

<style is:inline>
  .map iframe {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>
